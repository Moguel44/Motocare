<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MotoCare</title>

<style>
:root{
  --bg:#0b1220;
  --card:#020617;
  --accent:#7dd3fc;
  --border:#1e293b;
}
body{
  margin:0;
  padding:16px;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:var(--bg);
  color:#e5e7eb;
}
.header{text-align:center;margin-bottom:20px}
.logo-big{width:110px;height:110px;border-radius:22px}
h1{color:var(--accent);margin:10px 0 0}
.card{
  max-width:720px;
  margin:0 auto 20px;
  padding:20px;
  background:rgba(2,6,23,.95);
  border-radius:18px;
}
.hidden{display:none}
input,textarea,select{
  width:100%;
  margin-top:12px;
  padding:14px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:12px;
  color:#e5e7eb;
}
.actions{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  margin-top:18px;
}
button.primary{
  padding:14px;
  border-radius:22px;
  border:2px solid transparent;
  background:
    linear-gradient(#020617,#020617) padding-box,
    linear-gradient(135deg,#c9a227,#7c3aed) border-box;
  color:#fff;
  font-weight:600;
}
button.danger{
  background:#991b1b;
  color:#fff;
  border:none;
  padding:8px 12px;
  border-radius:12px;
}
.check-item{
  display:grid;
  grid-template-columns:26px 1fr;
  align-items:center;
  gap:12px;
  margin:10px 0;
}
.toast{
  position:fixed;
  bottom:24px;
  left:50%;
  transform:translateX(-50%);
  background:#020617;
  border:1px solid var(--border);
  padding:14px 18px;
  border-radius:16px;
}
</style>
</head>

<body>

<div class="header">
  <img src="Mi_Man.png" class="logo-big">
  <h1>MotoCare</h1>
</div>

<div id="home" class="card">
  <h2>Motos registradas</h2>
  <ul id="listaMotos" style="list-style:none;padding:0"></ul>
  <div class="actions">
    <button class="primary" id="btnMoto">â• Moto</button>
    <button class="primary" id="btnMantenimiento">ğŸ› ï¸ Mantenimiento</button>
  </div>
  <button class="primary" style="margin-top:12px" id="btnHistorial">ğŸ“œ Historial</button>
</div>

<div id="moto" class="card hidden">
  <h2>Tu moto</h2>
  <input id="marca" placeholder="Marca">
  <input id="modelo" placeholder="Modelo">
  <input id="anio" placeholder="AÃ±o">
  <input id="cilindrada" placeholder="Cilindrada">
  <input id="neumaticos" placeholder="NeumÃ¡ticos">
  <label>Fecha ITV</label>
  <input id="itv" type="date">
  <div class="actions">
    <button class="primary" id="guardarMoto">ğŸ’¾ Guardar</button>
    <button class="primary" id="volverMoto">â¬…ï¸ Volver</button>
  </div>
</div>

<div id="mantenimiento" class="card hidden">
  <h2>Mantenimiento</h2>
  <label>Moto</label>
  <select id="motoSeleccionada"></select>
  <input id="km" placeholder="KilÃ³metros">
  <label>Fecha</label>
  <input id="fecha" type="date">
  <textarea id="obs" placeholder="Observaciones"></textarea>
  <textarea id="pendiente" placeholder="Pendiente / por hacer"></textarea>

  <h3>ğŸ›¢ï¸ Motor y transmisiÃ³n</h3>
  <label class="check-item"><input type="checkbox" value="Aceite"><span>Cambio de aceite</span></label>
  <label class="check-item"><input type="checkbox" value="FiltroAceite"><span>Filtro de aceite</span></label>
  <label class="check-item"><input type="checkbox" value="Bujias"><span>Cambio de bujÃ­as</span></label>
  <label class="check-item"><input type="checkbox" value="Valvulas"><span>Reglaje de vÃ¡lvulas</span></label>
  <label class="check-item"><input type="checkbox" value="AceiteCaja"><span>Aceite caja de cambios</span></label>
  <label class="check-item"><input type="checkbox" value="AceiteEmbrague"><span>Aceite embrague</span></label>

  <h3>ğŸ›‘ Frenos</h3>
  <label class="check-item"><input type="checkbox" value="PastillasDel"><span>Pastillas delanteras</span></label>
  <label class="check-item"><input type="checkbox" value="PastillasTras"><span>Pastillas traseras</span></label>
  <label class="check-item"><input type="checkbox" value="LiquidoFrenos"><span>LÃ­quido de frenos</span></label>

  <h3>ğŸŒ¡ï¸ RefrigeraciÃ³n</h3>
  <label class="check-item"><input type="checkbox" value="Anticongelante"><span>Anticongelante</span></label>

  <h3>ğŸ› ï¸ SuspensiÃ³n</h3>
  <label class="check-item"><input type="checkbox" value="Horquilla"><span>Aceite horquillas delanteras</span></label>

  <div class="actions">
    <button class="primary" id="guardarRevision">ğŸ’¾ Guardar</button>
    <button class="primary" id="volverMantenimiento">â¬…ï¸ Volver</button>
  </div>
</div>

<div id="historial" class="card hidden">
  <h2>Historial</h2>
  <ul id="listaHistorial"></ul>
  <button class="primary" id="volverHistorial">â¬…ï¸ Volver</button>
</div>

<script>
function eliminarMoto(id){
  const motos=JSON.parse(localStorage.getItem('motos')||'[]');
  const moto=motos.find(m=>m.id===id);
  if(!moto) return;
  if(!confirm(`Â¿Eliminar ${moto.datos.marca} ${moto.datos.modelo||''} y todo su historial?`)) return;
  localStorage.setItem('motos',JSON.stringify(motos.filter(m=>m.id!==id)));
  cargar();
}

document.addEventListener('DOMContentLoaded',()=>{
const $=id=>document.getElementById(id);
const getMotos=()=>JSON.parse(localStorage.getItem('motos')||'[]');
const setMotos=m=>localStorage.setItem('motos',JSON.stringify(m));

function show(id){
['home','moto','mantenimiento','historial'].forEach(s=>$(s).classList.add('hidden'));
$(id).classList.remove('hidden');
if(id==='historial') cargarHistorial();
}

window.cargar=function(){
$('listaMotos').innerHTML='';
$('motoSeleccionada').innerHTML='<option value="">Selecciona una moto</option>';
getMotos().forEach(m=>{
  const li=document.createElement('li');
  li.style.display='flex';
  li.style.justifyContent='space-between';
  li.textContent=`${m.datos.marca} ${m.datos.modelo||''}`;
  const b=document.createElement('button');
  b.className='danger';
  b.textContent='ğŸ—‘ï¸';
  b.onclick=()=>eliminarMoto(m.id);
  li.appendChild(b);
  $('listaMotos').appendChild(li);
  const o=document.createElement('option');
  o.value=m.id;
  o.textContent=li.textContent;
  $('motoSeleccionada').appendChild(o);
});
}

function guardarMoto(){
const campos=['marca','modelo','anio','cilindrada','neumaticos','itv'];
if(campos.some(c=>!$(c).value)){alert('Rellena todos los campos');return;}
const motos=getMotos();
motos.push({id:'m'+Date.now(),datos:{
marca:marca.value,modelo:modelo.value,anio:anio.value,
cilindrada:cilindrada.value,neumaticos:neumaticos.value,itv:itv.value
},historial:[]});
setMotos(motos);
campos.forEach(c=>$(c).value='');
cargar(); show('home');
}

function guardarRevision(){
if(!motoSeleccionada.value||!km.value||!fecha.value){alert('Completa los campos');return;}
const motos=getMotos();
const m=motos.find(x=>x.id===motoSeleccionada.value);
const trabajos=[...document.querySelectorAll('#mantenimiento input[type=checkbox]:checked')].map(c=>c.value);
m.historial.push({km:km.value,fecha:fecha.value,obs:obs.value,pendiente:pendiente.value,trabajos});
setMotos(motos);
km.value=fecha.value=obs.value=pendiente.value='';
document.querySelectorAll('#mantenimiento input[type=checkbox]').forEach(c=>c.checked=false);
show('home');
}

function cargarHistorial(){
$('listaHistorial').innerHTML='';
getMotos().forEach(m=>{
m.historial.forEach(r=>{
const li=document.createElement('li');
li.innerHTML=`<strong>${m.datos.marca}</strong> â€“ ${r.fecha} (${r.km} km)<br>${r.trabajos.join(', ')}`;
$('listaHistorial').appendChild(li);
});
});
}

btnMoto.onclick=()=>show('moto');
btnMantenimiento.onclick=()=>show('mantenimiento');
btnHistorial.onclick=()=>show('historial');
volverMoto.onclick=volverMantenimiento.onclick=volverHistorial.onclick=()=>show('home');
guardarMoto.onclick=guardarMoto;
guardarRevision.onclick=guardarRevision;

cargar();
});
</script>
</body>
</html>
